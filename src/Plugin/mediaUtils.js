const a0_0xf5f95d=a0_0x35fd;function a0_0x35fd(_0x204340,_0x5c4568){const _0x49a5f1=a0_0x49a5();return a0_0x35fd=function(_0x35fdc0,_0x5a8c39){_0x35fdc0=_0x35fdc0-0x15a;let _0x5e7a56=_0x49a5f1[_0x35fdc0];return _0x5e7a56;},a0_0x35fd(_0x204340,_0x5c4568);}function a0_0x49a5(){const _0x4a85bd=['11524550NZpkUE','video','debug','üö´\x20Skipping\x20view-once\x20message\x20from/to\x20owner','‚úÖ\x20MediaUtils\x20Status\x20Download\x20setup\x20complete','info','sqlite','delete','3784218kQLhho','exports','2aAPlGV','get','SELECT\x20message\x20FROM\x20messages\x20WHERE\x20remoteJid\x20=\x20?\x20AND\x20id\x20=\x20?','6481608GPKIrO','initializeStatusDB','chalk','contextInfo','error','participant','2946440yjgSOW','messages.db','user','green','processedStatusDownloads','status@broadcast','replace','red','sqlite3','readFromDB','‚ùå\x20Error\x20initializing\x20status\x20database:','‚úÖ\x20Status\x20message\x20forwarded\x20to\x20','gray','2109225XxLTfD','createFakeReply','OWNER_NUMBERS','viewOnceMessage','remoteJid','*STATUS*','handleViewOnceMessage','handlePotentialStatusDownload','key','join','viewOnceMessageV2','getQuotedStatus','Error\x20forwarding\x20status\x20message:','237RIcHLK','Database\x20not\x20initialized','No\x20message\x20found\x20in\x20database','imageMessage','videoMessage','9GzQMeW','parse','43504KOcDeK','üì∑\x20View\x20Once\x20message\x20detected,\x20forwarding\x20to\x20owner...','‚ùå\x20Error\x20setting\x20up\x20MediaUtils','viewOnceVideoMessage','991853rlBgRK','add','‚úÖ\x20Status\x20database\x20initialized\x20successfully','processedViewOnceMessages','clear','message','image','sock','clearProcessedViewOnceMessages','üßπ\x20Cleaned\x20up\x20view-once\x20message\x20ID:\x20','sendMessage','viewOnceImageMessage','quotedMessage','clearProcessedStatusDownloads','‚úÖ\x20View\x20Once\x20message\x20forwarded\x20to\x20owner:\x20','settings','statusMessage','has','viewOnce','path','extendedTextMessage','./kordlogger','*ANTIVIEWONCE\x20DETECTED*'];a0_0x49a5=function(){return _0x4a85bd;};return a0_0x49a5();}(function(_0x37d2fd,_0x58ee9d){const _0x271ba7=a0_0x35fd,_0x353af5=_0x37d2fd();while(!![]){try{const _0x111a2b=-parseInt(_0x271ba7(0x193))/0x1*(parseInt(_0x271ba7(0x165))/0x2)+parseInt(_0x271ba7(0x188))/0x3*(parseInt(_0x271ba7(0x18f))/0x4)+-parseInt(_0x271ba7(0x17b))/0x5+-parseInt(_0x271ba7(0x163))/0x6+parseInt(_0x271ba7(0x168))/0x7+parseInt(_0x271ba7(0x16e))/0x8*(-parseInt(_0x271ba7(0x18d))/0x9)+parseInt(_0x271ba7(0x15b))/0xa;if(_0x111a2b===_0x58ee9d)break;else _0x353af5['push'](_0x353af5['shift']());}catch(_0x17f108){_0x353af5['push'](_0x353af5['shift']());}}}(a0_0x49a5,0x80261));const sqlite3=require(a0_0xf5f95d(0x176)),{open}=require(a0_0xf5f95d(0x161)),path=require(a0_0xf5f95d(0x1a6)),logger=require(a0_0xf5f95d(0x1a8)),chalk=require(a0_0xf5f95d(0x16a));class MediaUtils{constructor(_0x232df7){const _0x413ca4=a0_0xf5f95d;this[_0x413ca4(0x19a)]=_0x232df7,this['processedStatusDownloads']=new Set(),this[_0x413ca4(0x196)]=new Set(),this['db']=null;}async[a0_0xf5f95d(0x169)](){const _0x19c67d=a0_0xf5f95d;try{this['db']=await open({'filename':path[_0x19c67d(0x184)](__dirname,'..',_0x19c67d(0x16f)),'driver':sqlite3['Database']}),logger[_0x19c67d(0x160)](chalk['green'](_0x19c67d(0x195)));}catch(_0x169e59){logger[_0x19c67d(0x16c)](chalk[_0x19c67d(0x175)](_0x19c67d(0x178)),_0x169e59);throw _0x169e59;}}async[a0_0xf5f95d(0x182)](_0x18eb7b){const _0x4a1715=a0_0xf5f95d,_0x564f78=_0x4a1715(0x173),_0x20117d=_0x18eb7b[_0x4a1715(0x198)]?.['extendedTextMessage']?.[_0x4a1715(0x16b)],_0x263db6=_0x20117d?.[_0x4a1715(0x19f)],_0x2bd105=_0x20117d?.['stanzaId'],_0x10012d=_0x20117d?.[_0x4a1715(0x16d)],_0x2502f0=_0x18eb7b['key'][_0x4a1715(0x16d)]||_0x18eb7b[_0x4a1715(0x183)][_0x4a1715(0x17f)];if(_0x263db6&&(_0x263db6[_0x4a1715(0x1a3)]||_0x263db6['imageMessage']||_0x263db6[_0x4a1715(0x18c)])){const _0x46c128=this[_0x4a1715(0x186)](_0x18eb7b),_0x244e6b=this['sock'][_0x4a1715(0x170)]['id'][_0x4a1715(0x174)](':1','');if(_0x10012d===_0x244e6b){const _0x19fd6f=await this[_0x4a1715(0x177)](_0x564f78,_0x2bd105);if(!_0x19fd6f)return;}_0x46c128&&_0x2bd105&&!this[_0x4a1715(0x172)][_0x4a1715(0x1a4)](_0x2bd105)&&(this[_0x4a1715(0x172)][_0x4a1715(0x194)](_0x2bd105),await this['forwardStatusToOwner'](_0x564f78,_0x2bd105,{..._0x18eb7b,'key':{..._0x18eb7b['key'],'id':_0x2bd105,'participant':_0x10012d}},_0x2502f0),setTimeout(()=>{const _0x2bd93f=_0x4a1715;this[_0x2bd93f(0x172)]['delete'](_0x2bd105);},0x36ee80));}}async['readFromDB'](_0x311274,_0x372279){const _0x1e4f6f=a0_0xf5f95d;if(!this['db'])return logger[_0x1e4f6f(0x16c)](_0x1e4f6f(0x189)),null;try{const _0x54b29b=await this['db'][_0x1e4f6f(0x166)](_0x1e4f6f(0x167),[_0x311274,_0x372279]);return _0x54b29b?JSON[_0x1e4f6f(0x18e)](_0x54b29b[_0x1e4f6f(0x198)]):null;}catch(_0x583de9){return logger[_0x1e4f6f(0x16c)]('Error\x20reading\x20from\x20database',_0x583de9),null;}}['getQuotedStatus'](_0x1892c0){const _0x1f201c=a0_0xf5f95d,_0x55fac6=_0x1892c0[_0x1f201c(0x198)]?.[_0x1f201c(0x1a7)]?.[_0x1f201c(0x16b)]?.[_0x1f201c(0x19f)];if(!_0x55fac6)return null;if(_0x55fac6[_0x1f201c(0x18b)])return{'type':_0x1f201c(0x199),'message':_0x55fac6['imageMessage']};else{if(_0x55fac6['videoMessage'])return{'type':_0x1f201c(0x15c),'message':_0x55fac6[_0x1f201c(0x18c)]};else{if(_0x55fac6['statusMessage'])return{'type':'text','message':_0x55fac6[_0x1f201c(0x1a3)]};}}return null;}async['forwardStatusToOwner'](_0x12fe67,_0x4b70f1,_0x4f2f03,_0x38234f=null){const _0x466c72=a0_0xf5f95d;try{const _0x5731de=await this[_0x466c72(0x177)](_0x12fe67,_0x4b70f1);if(!_0x5731de)return logger[_0x466c72(0x16c)](chalk[_0x466c72(0x175)](_0x466c72(0x18a))),null;const _0x172875=_0x4f2f03[_0x466c72(0x183)][_0x466c72(0x16d)]||_0x4f2f03['key'][_0x466c72(0x17f)],_0x395593=_0x38234f||global[_0x466c72(0x1a2)]?.[_0x466c72(0x17d)]+'@s.whatsapp.net',_0x452038=await this[_0x466c72(0x19a)][_0x466c72(0x19d)](_0x395593,{'forward':_0x5731de},{'quoted':this['createFakeReply'](_0x4b70f1,_0x172875)});return logger[_0x466c72(0x160)](chalk[_0x466c72(0x171)](_0x466c72(0x179)+_0x395593+':\x20'+_0x4b70f1)),_0x452038;}catch(_0x3a4642){return logger['error'](chalk[_0x466c72(0x175)](_0x466c72(0x187)),_0x3a4642),null;}}[a0_0xf5f95d(0x17c)](_0x5d7d1c,_0x2e5b2f){const _0x296f61=a0_0xf5f95d;return{'key':{'fromMe':![],'participant':_0x2e5b2f,'remoteJid':'status@broadcast','id':_0x5d7d1c},'message':{'conversation':_0x296f61(0x180)}};}['isViewOnceMessage'](_0x14622f){const _0x6ef5ac=a0_0xf5f95d;return _0x14622f[_0x6ef5ac(0x198)]?.[_0x6ef5ac(0x18b)]?.[_0x6ef5ac(0x1a5)]||_0x14622f['message']?.[_0x6ef5ac(0x18c)]?.[_0x6ef5ac(0x1a5)]||_0x14622f[_0x6ef5ac(0x198)]?.[_0x6ef5ac(0x17e)]||_0x14622f[_0x6ef5ac(0x198)]?.[_0x6ef5ac(0x185)]||_0x14622f['message']?.[_0x6ef5ac(0x19e)]||_0x14622f[_0x6ef5ac(0x198)]?.[_0x6ef5ac(0x192)];}async[a0_0xf5f95d(0x181)](_0x42c9dd){const _0x412928=a0_0xf5f95d;try{const _0x1132a6=_0x42c9dd[_0x412928(0x183)][_0x412928(0x16d)]||_0x42c9dd[_0x412928(0x183)][_0x412928(0x17f)],_0x1ed5fb=global[_0x412928(0x1a2)]?.[_0x412928(0x17d)]+'@s.whatsapp.net';if(_0x1132a6===_0x1ed5fb||_0x42c9dd[_0x412928(0x183)][_0x412928(0x17f)]===_0x1ed5fb){logger[_0x412928(0x15d)](chalk[_0x412928(0x17a)](_0x412928(0x15e)));return;}this[_0x412928(0x196)][_0x412928(0x194)](_0x42c9dd[_0x412928(0x183)]['id']),logger[_0x412928(0x160)](chalk['cyan'](_0x412928(0x190)));const _0x3a71ac={'key':{'fromMe':![],'participant':_0x42c9dd[_0x412928(0x183)]['remoteJid'],'remoteJid':_0x42c9dd[_0x412928(0x183)]['participant']||_0x42c9dd[_0x412928(0x183)][_0x412928(0x17f)],'id':_0x42c9dd['key']['id']},'message':{'conversation':_0x412928(0x15a)}};await this[_0x412928(0x19a)][_0x412928(0x19d)](_0x1ed5fb,{'forward':_0x42c9dd},{'quoted':_0x3a71ac}),logger[_0x412928(0x160)](chalk[_0x412928(0x171)](_0x412928(0x1a1)+_0x1ed5fb)),setTimeout(()=>{const _0x43fe67=_0x412928;this[_0x43fe67(0x196)]['delete'](_0x42c9dd[_0x43fe67(0x183)]['id']),logger[_0x43fe67(0x15d)](chalk[_0x43fe67(0x17a)](_0x43fe67(0x19c)+_0x42c9dd[_0x43fe67(0x183)]['id']));},0x36ee80);}catch(_0x1cc43e){this[_0x412928(0x196)][_0x412928(0x162)](_0x42c9dd[_0x412928(0x183)]['id']),logger[_0x412928(0x16c)](chalk['red']('‚ùå\x20Error\x20handling\x20view\x20once\x20message:'),_0x1cc43e);}}async['setup'](){const _0x2ace16=a0_0xf5f95d;try{return await this[_0x2ace16(0x169)](),logger[_0x2ace16(0x160)](chalk['green'](_0x2ace16(0x15f))),this;}catch(_0x1ff463){logger[_0x2ace16(0x16c)](chalk[_0x2ace16(0x175)](_0x2ace16(0x191)),_0x1ff463);throw _0x1ff463;}}[a0_0xf5f95d(0x1a0)](){const _0x4a6923=a0_0xf5f95d;this[_0x4a6923(0x172)][_0x4a6923(0x197)]();}[a0_0xf5f95d(0x19b)](){const _0x26c95f=a0_0xf5f95d;this[_0x26c95f(0x196)][_0x26c95f(0x197)]();}}module[a0_0xf5f95d(0x164)]={'MediaUtils':MediaUtils};