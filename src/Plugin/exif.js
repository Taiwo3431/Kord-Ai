const a0_0x411a89=a0_0x4341;(function(_0x351bfb,_0x278e0a){const _0x4955ac=a0_0x4341,_0x4cd305=_0x351bfb();while(!![]){try{const _0xf9442a=parseInt(_0x4955ac(0x167))/0x1+parseInt(_0x4955ac(0x150))/0x2*(parseInt(_0x4955ac(0x15e))/0x3)+parseInt(_0x4955ac(0x142))/0x4*(-parseInt(_0x4955ac(0x16c))/0x5)+-parseInt(_0x4955ac(0x145))/0x6+parseInt(_0x4955ac(0x141))/0x7+parseInt(_0x4955ac(0x15b))/0x8+-parseInt(_0x4955ac(0x16f))/0x9;if(_0xf9442a===_0x278e0a)break;else _0x4cd305['push'](_0x4cd305['shift']());}catch(_0x2f6b6c){_0x4cd305['push'](_0x4cd305['shift']());}}}(a0_0x4696,0x7ff69));const fs=require('fs'),{tmpdir}=require('os'),Crypto=require('crypto'),ff=require(a0_0x411a89(0x16a)),ffmpegPath=require(a0_0x411a89(0x148))[a0_0x411a89(0x143)],webp=require(a0_0x411a89(0x146)),path=require(a0_0x411a89(0x143));function a0_0x4341(_0x1698d4,_0x4815a6){const _0x4696e7=a0_0x4696();return a0_0x4341=function(_0x434156,_0x3080ea){_0x434156=_0x434156-0x13f;let _0x27ec45=_0x4696e7[_0x434156];return _0x27ec45;},a0_0x4341(_0x1698d4,_0x4815a6);}ff['setFfmpegPath'](ffmpegPath);async function imageToWebp(_0x1340b4){const _0x2b9379=a0_0x411a89,_0x3b5d51=path[_0x2b9379(0x163)](tmpdir(),Crypto[_0x2b9379(0x13f)](0x6)['readUIntLE'](0x0,0x6)['toString'](0x24)+'.webp'),_0x3abc0c=path['join'](tmpdir(),Crypto['randomBytes'](0x6)['readUIntLE'](0x0,0x6)[_0x2b9379(0x155)](0x24)+'.jpg');fs['writeFileSync'](_0x3abc0c,_0x1340b4),await new Promise((_0x5b87c5,_0x2865b8)=>{const _0x3b3f3d=_0x2b9379;ff(_0x3abc0c)['on'](_0x3b3f3d(0x15a),_0x2865b8)['on'](_0x3b3f3d(0x173),()=>_0x5b87c5(!![]))['addOutputOptions'](['-vcodec',_0x3b3f3d(0x14d),'-vf',_0x3b3f3d(0x172)])['toFormat']('webp')['save'](_0x3b5d51);});const _0x6e8c39=fs[_0x2b9379(0x15d)](_0x3b5d51);return fs[_0x2b9379(0x159)](_0x3b5d51),fs[_0x2b9379(0x159)](_0x3abc0c),_0x6e8c39;}async function videoToWebp(_0x32f3e2){const _0x507f4e=a0_0x411a89,_0x2fa540=path[_0x507f4e(0x163)](tmpdir(),Crypto[_0x507f4e(0x13f)](0x6)[_0x507f4e(0x147)](0x0,0x6)[_0x507f4e(0x155)](0x24)+'.webp'),_0x3815a7=path[_0x507f4e(0x163)](tmpdir(),Crypto['randomBytes'](0x6)[_0x507f4e(0x147)](0x0,0x6)[_0x507f4e(0x155)](0x24)+'.mp4');fs[_0x507f4e(0x149)](_0x3815a7,_0x32f3e2),await new Promise((_0x575e35,_0x324aca)=>{const _0x5c779a=_0x507f4e;ff(_0x3815a7)['on'](_0x5c779a(0x15a),_0x324aca)['on'](_0x5c779a(0x173),()=>_0x575e35(!![]))[_0x5c779a(0x14f)]([_0x5c779a(0x14a),_0x5c779a(0x14d),'-vf',_0x5c779a(0x172),_0x5c779a(0x154),'0',_0x5c779a(0x160),_0x5c779a(0x165),'-t','00:00:05',_0x5c779a(0x175),_0x5c779a(0x140),'-an',_0x5c779a(0x166),'0'])[_0x5c779a(0x161)](_0x5c779a(0x171))['save'](_0x2fa540);});const _0x107fc6=fs[_0x507f4e(0x15d)](_0x2fa540);return fs['unlinkSync'](_0x2fa540),fs['unlinkSync'](_0x3815a7),_0x107fc6;}async function writeExifImg(_0x277abe,_0x44f933){const _0x9b3f43=a0_0x411a89;let _0x3fc130=await imageToWebp(_0x277abe);const _0xfad24e=path['join'](tmpdir(),Crypto[_0x9b3f43(0x13f)](0x6)['readUIntLE'](0x0,0x6)[_0x9b3f43(0x155)](0x24)+_0x9b3f43(0x157)),_0x3ba206=path[_0x9b3f43(0x163)](tmpdir(),Crypto[_0x9b3f43(0x13f)](0x6)[_0x9b3f43(0x147)](0x0,0x6)[_0x9b3f43(0x155)](0x24)+'.webp');fs[_0x9b3f43(0x149)](_0xfad24e,_0x3fc130);if(_0x44f933[_0x9b3f43(0x156)]||_0x44f933['author']){const _0xce9ce2=new webp[(_0x9b3f43(0x169))](),_0x1995da={'sticker-pack-id':_0x9b3f43(0x162),'sticker-pack-name':_0x44f933[_0x9b3f43(0x156)],'sticker-pack-publisher':_0x44f933[_0x9b3f43(0x174)],'emojis':_0x44f933[_0x9b3f43(0x152)]?_0x44f933[_0x9b3f43(0x152)]:['']},_0x29de37=Buffer[_0x9b3f43(0x144)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x11fbc7=Buffer[_0x9b3f43(0x144)](JSON[_0x9b3f43(0x14b)](_0x1995da),_0x9b3f43(0x170)),_0xdc6ab4=Buffer[_0x9b3f43(0x14e)]([_0x29de37,_0x11fbc7]);return _0xdc6ab4[_0x9b3f43(0x16b)](_0x11fbc7[_0x9b3f43(0x153)],0xe,0x4),await _0xce9ce2[_0x9b3f43(0x16e)](_0xfad24e),fs[_0x9b3f43(0x159)](_0xfad24e),_0xce9ce2[_0x9b3f43(0x15f)]=_0xdc6ab4,await _0xce9ce2[_0x9b3f43(0x164)](_0x3ba206),_0x3ba206;}}async function writeExifVid(_0x2ba52f,_0x3e1d8c){const _0x121b12=a0_0x411a89;let _0x45fea1=await videoToWebp(_0x2ba52f);const _0x5c5062=path[_0x121b12(0x163)](tmpdir(),Crypto[_0x121b12(0x13f)](0x6)[_0x121b12(0x147)](0x0,0x6)[_0x121b12(0x155)](0x24)+_0x121b12(0x157)),_0x972fdc=path[_0x121b12(0x163)](tmpdir(),Crypto[_0x121b12(0x13f)](0x6)[_0x121b12(0x147)](0x0,0x6)[_0x121b12(0x155)](0x24)+_0x121b12(0x157));fs[_0x121b12(0x149)](_0x5c5062,_0x45fea1);if(_0x3e1d8c[_0x121b12(0x156)]||_0x3e1d8c[_0x121b12(0x174)]){const _0x564282=new webp['Image'](),_0x35b3aa={'sticker-pack-id':'https://github.com/DGXeon','sticker-pack-name':_0x3e1d8c[_0x121b12(0x156)],'sticker-pack-publisher':_0x3e1d8c['author'],'emojis':_0x3e1d8c[_0x121b12(0x152)]?_0x3e1d8c[_0x121b12(0x152)]:['']},_0x413df2=Buffer['from']([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x3ce0b9=Buffer[_0x121b12(0x144)](JSON['stringify'](_0x35b3aa),'utf-8'),_0xbe8bc6=Buffer[_0x121b12(0x14e)]([_0x413df2,_0x3ce0b9]);return _0xbe8bc6['writeUIntLE'](_0x3ce0b9[_0x121b12(0x153)],0xe,0x4),await _0x564282[_0x121b12(0x16e)](_0x5c5062),fs['unlinkSync'](_0x5c5062),_0x564282[_0x121b12(0x15f)]=_0xbe8bc6,await _0x564282[_0x121b12(0x164)](_0x972fdc),_0x972fdc;}}async function writeExif(_0x3fe2e7,_0x440d54){const _0x1e14d3=a0_0x411a89;let _0x32d64f=/webp/[_0x1e14d3(0x15c)](_0x3fe2e7[_0x1e14d3(0x151)])?_0x3fe2e7[_0x1e14d3(0x168)]:/image/[_0x1e14d3(0x15c)](_0x3fe2e7[_0x1e14d3(0x151)])?await imageToWebp(_0x3fe2e7['data']):/video/['test'](_0x3fe2e7[_0x1e14d3(0x151)])?await videoToWebp(_0x3fe2e7[_0x1e14d3(0x168)]):'';const _0x5cb947=path[_0x1e14d3(0x163)](tmpdir(),Crypto[_0x1e14d3(0x13f)](0x6)[_0x1e14d3(0x147)](0x0,0x6)[_0x1e14d3(0x155)](0x24)+_0x1e14d3(0x157)),_0x430575=path[_0x1e14d3(0x163)](tmpdir(),Crypto[_0x1e14d3(0x13f)](0x6)[_0x1e14d3(0x147)](0x0,0x6)[_0x1e14d3(0x155)](0x24)+_0x1e14d3(0x157));fs[_0x1e14d3(0x149)](_0x5cb947,_0x32d64f);if(_0x440d54[_0x1e14d3(0x156)]||_0x440d54['author']){const _0x5e451f=new webp[(_0x1e14d3(0x169))](),_0x1a9a03={'sticker-pack-id':_0x1e14d3(0x162),'sticker-pack-name':_0x440d54[_0x1e14d3(0x156)],'sticker-pack-publisher':_0x440d54[_0x1e14d3(0x174)],'emojis':_0x440d54[_0x1e14d3(0x152)]?_0x440d54[_0x1e14d3(0x152)]:['']},_0x3b02cf=Buffer[_0x1e14d3(0x144)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x51393a=Buffer['from'](JSON['stringify'](_0x1a9a03),'utf-8'),_0xda358c=Buffer[_0x1e14d3(0x14e)]([_0x3b02cf,_0x51393a]);return _0xda358c[_0x1e14d3(0x16b)](_0x51393a[_0x1e14d3(0x153)],0xe,0x4),await _0x5e451f['load'](_0x5cb947),fs[_0x1e14d3(0x159)](_0x5cb947),_0x5e451f['exif']=_0xda358c,await _0x5e451f[_0x1e14d3(0x164)](_0x430575),_0x430575;}}const {Image}=require(a0_0x411a89(0x146)),{format}=require(a0_0x411a89(0x16d));function a0_0x4696(){const _0xf8399b=['from','3271950sKyqYo','node-webpmux','readUIntLE','@ffmpeg-installer/ffmpeg','writeFileSync','-vcodec','stringify','utf8','libwebp','concat','addOutputOptions','2WiRIgc','mimetype','categories','length','-loop','toString','packname','.webp','exports','unlinkSync','error','1712808YvdZVf','test','readFileSync','784989EVnGam','exif','-ss','toFormat','https://github.com/DGXeon','join','save','00:00:00','-vsync','842736VbDsIj','data','Image','fluent-ffmpeg','writeUIntLE','123725fvqpzr','util','load','1170000itstGh','utf-8','webp','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','end','author','-preset','randomBytes','default','2977464gJsAjI','88mmFxUG','path'];a0_0x4696=function(){return _0xf8399b;};return a0_0x4696();}async function addExif(_0x3a54a5,_0x24d4a4,_0x54f017,_0x1067bd=[''],_0xf8cb94={}){const _0x5bc4b0=a0_0x411a89,_0x2baace=new Image(),_0x39d9d0={'sticker-pack-id':'DGXeon','sticker-pack-name':_0x24d4a4,'sticker-pack-publisher':_0x54f017,'emojis':_0x1067bd,'is-avatar-sticker':0x1,..._0xf8cb94};let _0x22aede=Buffer[_0x5bc4b0(0x144)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x1320ea=Buffer[_0x5bc4b0(0x144)](JSON['stringify'](_0x39d9d0),_0x5bc4b0(0x14c)),_0x86aab8=Buffer[_0x5bc4b0(0x14e)]([_0x22aede,_0x1320ea]);return _0x86aab8[_0x5bc4b0(0x16b)](_0x1320ea[_0x5bc4b0(0x153)],0xe,0x4),await _0x2baace[_0x5bc4b0(0x16e)](_0x3a54a5),_0x2baace[_0x5bc4b0(0x15f)]=_0x86aab8,await _0x2baace['save'](null);}module[a0_0x411a89(0x158)]={'addExif':addExif,'imageToWebp':imageToWebp,'videoToWebp':videoToWebp,'writeExifImg':writeExifImg,'writeExifVid':writeExifVid,'writeExif':writeExif};