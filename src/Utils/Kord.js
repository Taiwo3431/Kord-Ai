const a0_0x2ecd22=a0_0x35f8;(function(_0x660dfa,_0x407a97){const _0x3b6f43=a0_0x35f8,_0x4d00f2=_0x660dfa();while(!![]){try{const _0x396136=parseInt(_0x3b6f43(0xb3))/0x1+parseInt(_0x3b6f43(0xcd))/0x2*(parseInt(_0x3b6f43(0x96))/0x3)+-parseInt(_0x3b6f43(0xbd))/0x4*(parseInt(_0x3b6f43(0xbe))/0x5)+-parseInt(_0x3b6f43(0xed))/0x6+parseInt(_0x3b6f43(0x8e))/0x7*(-parseInt(_0x3b6f43(0xf1))/0x8)+-parseInt(_0x3b6f43(0xb4))/0x9*(parseInt(_0x3b6f43(0xc3))/0xa)+parseInt(_0x3b6f43(0x104))/0xb*(parseInt(_0x3b6f43(0xeb))/0xc);if(_0x396136===_0x407a97)break;else _0x4d00f2['push'](_0x4d00f2['shift']());}catch(_0x292011){_0x4d00f2['push'](_0x4d00f2['shift']());}}}(a0_0x178f,0x72586));const fs=require('fs')['promises'],fss=require('fs'),path=require(a0_0x2ecd22(0xb2)),{default:makeWASocket,useMultiFileAuthState,DisconnectReason,fetchLatestBaileysVersion,makeCacheableSignalKeyStore,makeInMemoryStore}=require('@whiskeysockets/baileys'),{Boom}=require(a0_0x2ecd22(0xea)),pino=require(a0_0x2ecd22(0x102)),NodeCache=require(a0_0x2ecd22(0x103)),chalk=require(a0_0x2ecd22(0x8d)),axios=require(a0_0x2ecd22(0xa8)),{setupAntidelete}=require(a0_0x2ecd22(0x86)),antilinkCommand=require(a0_0x2ecd22(0x91)),chatbotModule=require(a0_0x2ecd22(0xf3)),{kordMsg}=require('../Plugin/kordMsg'),{initializeKordEvents}=require(a0_0x2ecd22(0xf5)),{loadCommands}=require(a0_0x2ecd22(0xfe)),{againstEventManager}=require(a0_0x2ecd22(0xff)),SQLiteMessageStore=require(a0_0x2ecd22(0xa5)),SESSION_DIR=path[a0_0x2ecd22(0xd0)](__dirname,'..',a0_0x2ecd22(0x8b)),STORE_FILE_PATH=path['join'](__dirname,'..','store.json'),LOGGER=pino({'level':process[a0_0x2ecd22(0xa2)][a0_0x2ecd22(0xd2)]||a0_0x2ecd22(0xe5)}),MSG_RETRY_CACHE=new NodeCache();let messagesSent=0x0,heartbeatInterval,isRestarting=![];async function sendHeartbeat(){const _0x277db9=a0_0x2ecd22;try{const _0x436281=path[_0x277db9(0xd0)](__dirname,'..','..',_0x277db9(0x97)),_0x5084ff=JSON[_0x277db9(0xa3)](await fs['readFile'](_0x436281,_0x277db9(0xe6))),_0x2de8ae=_0x5084ff[_0x277db9(0xd3)],_0x5d591e=global[_0x277db9(0xc5)][_0x277db9(0x95)],_0x4fb712=await axios[_0x277db9(0xde)](_0x277db9(0xf0),{'botId':_0x5d591e,'metadata':{'version':_0x2de8ae,'messagesSent':messagesSent,'uptime':Math[_0x277db9(0xc6)](process[_0x277db9(0x87)]()),'lastActive':new Date()['toISOString']()}},{'headers':{'x-api-key':_0x277db9(0xf8),'Content-Type':_0x277db9(0xfc)},'timeout':0x1388});_0x4fb712['data']['status']==='success'&&(console[_0x277db9(0xfd)]('Heartbeat\x20recorded\x20successfully'),console[_0x277db9(0xfd)]('Last\x20heartbeat:',_0x4fb712[_0x277db9(0xb5)][_0x277db9(0xb5)][_0x277db9(0xe1)]));}catch(_0xb07c3){if(_0xb07c3[_0x277db9(0xb7)]){const _0x12c947=_0xb07c3[_0x277db9(0xb7)][_0x277db9(0xf2)],_0x23b24f=_0xb07c3[_0x277db9(0xb7)][_0x277db9(0xb5)]?.[_0x277db9(0xc0)]||'Unknown\x20error';switch(_0x12c947){case 0x190:console[_0x277db9(0x8a)](_0x277db9(0xc2),_0x23b24f);break;case 0x191:console[_0x277db9(0x8a)]('Authentication\x20failed.\x20Check\x20API\x20key');break;case 0x1f4:console[_0x277db9(0x8a)](_0x277db9(0xdc),_0x23b24f);break;default:console[_0x277db9(0x8a)](_0x277db9(0xcf)+_0x12c947+'):',_0x23b24f);}}else _0xb07c3['request']?console[_0x277db9(0x8a)](_0x277db9(0xb1)):console[_0x277db9(0x8a)]('Error\x20sending\x20heartbeat:',_0xb07c3[_0x277db9(0xc0)]);}}function a0_0x35f8(_0x53f6d3,_0x2d0399){const _0x178f6e=a0_0x178f();return a0_0x35f8=function(_0x35f89c,_0x5b02de){_0x35f89c=_0x35f89c-0x86;let _0xad2c5d=_0x178f6e[_0x35f89c];return _0xad2c5d;},a0_0x35f8(_0x53f6d3,_0x2d0399);}let heartbeatFailures=0x0;const MAX_FAILURES=0x3,RETRY_DELAY=0x1388;function a0_0x178f(){const _0x162d48=['writeFileSync','messages','statusCode','close','Server\x20error:','Error\x20during\x20restart\x20preparation:','post','remoteJid','SIGINT','lastHeartbeat','authState','Initial\x20heartbeat\x20established','loggedOut','silent','utf-8','API\x20Response:','Reconnecting:',',\x20isLatest:\x20','@hapi/boom','182796yBoGxI','Using\x20WA\x20v','1194420kvdanK','get','update','https://kordai-dash.vercel.app/api/status/heartbeat','43216rVcZSd','status','../Commands/Bot/bot','creds','../Plugin/kordEvent','connection.update','Failed\x20to\x20send\x20offline\x20status\x20update','kordAi.key','success','messages.upsert','Error\x20in\x20kordAi:','application/json','log','../Plugin/kordLoadCmd','../Plugin/kordEventHandle','output','No\x20SESSION_ID\x20in\x20config\x20or\x20creds.json\x20found.\x20Proceeding\x20to\x20pairing\x20code...','pino','node-cache','1309VawTHL','open','../Antidelete','uptime','clearOldMessages','Bot\x20restarted\x20successfully','error','Session','uncaughtException','chalk','546cxlEau','/messagestotal','Retrying\x20initial\x20heartbeat\x20(','../Commands/Bot/antilink','Using\x20base64\x20encoded\x20session\x20ID\x20from\x20config','Connected\x20successfully!\x20ðŸŽ‰','bind','OWNER_NAME','3nVyAeU','package.json','KordAI\x20session\x20ID\x20detected,\x20fetching\x20credentials\x20from\x20API...','Unhandled\x20Rejection\x20at:','toString','Uncaught\x20Exception:','?apikey=kordAi.key','Error\x20in\x20getAuthState:','exports','readFileSync','trim','Initiating\x20bot\x20restart...','env','parse','red','../Plugin/SQLitedb','yellow','messageStubType','axios','green','stringify','replace','Using\x20SESSION_ID\x20from\x20existing\x20creds.json','creds.update','base64','blue','from','No\x20response\x20from\x20heartbeat\x20server','path','527982vSfntP','3863421KUFKRR','data','json','response','Multiple\x20heartbeat\x20failures\x20detected,\x20stopping\x20heartbeat\x20service','keys','Connection\x20closed\x20due\x20to:','kord_ai-','requestPairingCode','232Pfphqb','43090ivrZEb','Failed\x20to\x20fetch\x20credentials\x20from\x20API','message','Received\x20SIGINT.\x20Initiating\x20restart\x20procedure...','Invalid\x20heartbeat\x20data:','20pgyGxV','reason:','settings','floor','unhandledRejection','Heartbeat\x20service\x20stopped','Commands',')...','1.0.0','existsSync','212914HZdJpb','Message\x20update\x20event\x20detected','Heartbeat\x20failed\x20(','join','creds.json','LOG_LEVEL','version','registered','messages.update','cyan','init'];a0_0x178f=function(){return _0x162d48;};return a0_0x178f();}async function startHeartbeat(){heartbeatInterval&&clearInterval(heartbeatInterval);heartbeatFailures=0x0;const _0x3ed4c7=async()=>{const _0xda14f2=a0_0x35f8;try{await sendHeartbeat(),console['log'](chalk[_0xda14f2(0xa9)](_0xda14f2(0xe3))),heartbeatFailures=0x0;}catch(_0x556fd2){heartbeatFailures++;if(heartbeatFailures<MAX_FAILURES){console['log'](chalk['yellow'](_0xda14f2(0x90)+heartbeatFailures+'/'+MAX_FAILURES+_0xda14f2(0xca))),setTimeout(_0x3ed4c7,RETRY_DELAY);return;}console[_0xda14f2(0x8a)](chalk[_0xda14f2(0xa4)]('Failed\x20to\x20establish\x20initial\x20heartbeat'));}};await _0x3ed4c7(),heartbeatInterval=setInterval(async()=>{const _0x4e56b1=a0_0x35f8;try{await sendHeartbeat(),heartbeatFailures=0x0;}catch(_0x6624c7){heartbeatFailures++,heartbeatFailures>=MAX_FAILURES&&(console[_0x4e56b1(0x8a)](chalk[_0x4e56b1(0xa4)](_0x4e56b1(0xb8))),await stopHeartbeat());}},0x5*0x3c*0x3e8);}async function stopHeartbeat(){const _0x573109=a0_0x2ecd22;if(heartbeatInterval){clearInterval(heartbeatInterval),heartbeatInterval=null,console['log'](chalk[_0x573109(0xa6)](_0x573109(0xc8)));try{await axios[_0x573109(0xde)]('https://kordai-dash.vercel.app/api/status/heartbeat',{'botId':'kordai-test','metadata':{'version':_0x573109(0xcb),'messagesSent':messagesSent,'uptime':Math[_0x573109(0xc6)](process[_0x573109(0x87)]()),'lastActive':new Date()['toISOString'](),'status':'offline'}},{'headers':{'x-api-key':_0x573109(0xf8),'Content-Type':'application/json'}});}catch(_0x27b7c5){console[_0x573109(0x8a)](chalk[_0x573109(0xa4)](_0x573109(0xf7)));}}}async function getAuthState(){const _0x171492=a0_0x2ecd22,_0x30a192=path[_0x171492(0xd0)](SESSION_DIR,_0x171492(0xd1));try{let _0x30e8b8=global['settings']['SESSION_ID'];if(_0x30e8b8&&_0x30e8b8!==''){if(_0x30e8b8['startsWith'](_0x171492(0xbb))){console[_0x171492(0xfd)](chalk[_0x171492(0xaf)](_0x171492(0x98)));try{const _0x1fa47c=_0x30e8b8[_0x171492(0xab)](_0x171492(0xbb),''),_0x22f5e6=await axios['get']('https://kordai-dash.vercel.app/api/files/fetch/'+_0x1fa47c+_0x171492(0x9c));if(_0x22f5e6[_0x171492(0xb5)][_0x171492(0xf2)]===_0x171492(0xf9)&&_0x22f5e6[_0x171492(0xb5)][_0x171492(0xb5)]){!fss[_0x171492(0xcc)](SESSION_DIR)&&fss['mkdirSync'](SESSION_DIR,{'recursive':!![]});const _0x5b8313=JSON[_0x171492(0xaa)](_0x22f5e6[_0x171492(0xb5)][_0x171492(0xb5)],null,0x2);fss[_0x171492(0xd8)](_0x30a192,_0x5b8313),console[_0x171492(0xfd)](chalk[_0x171492(0xa9)]('Successfully\x20fetched\x20and\x20saved\x20credentials\x20from\x20API'));}else throw new Error('Invalid\x20or\x20missing\x20data\x20in\x20API\x20response');}catch(_0x209f5b){console['error'](chalk['red']('Error\x20fetching\x20credentials\x20from\x20API:',_0x209f5b[_0x171492(0xc0)]));_0x209f5b[_0x171492(0xb7)]&&console[_0x171492(0x8a)](chalk['red'](_0x171492(0xe7),_0x209f5b[_0x171492(0xb7)][_0x171492(0xb5)]));throw new Error(_0x171492(0xbf));}}else{console[_0x171492(0xfd)](chalk[_0x171492(0xaf)](_0x171492(0x92)));const _0x316c4f=Buffer[_0x171492(0xb0)](_0x30e8b8,_0x171492(0xae))[_0x171492(0x9a)](_0x171492(0xe6));fss['writeFileSync'](_0x30a192,_0x316c4f);}}else{if(fss['existsSync'](_0x30a192)){const _0x28a179=fss[_0x171492(0x9f)](_0x30a192,_0x171492(0xe6)),_0x455ca9=JSON[_0x171492(0xa3)](_0x28a179);console[_0x171492(0xfd)](chalk['blue'](_0x171492(0xac))),_0x30e8b8=_0x455ca9;}else console['log'](chalk['yellow'](_0x171492(0x101)));}return console[_0x171492(0xfd)](chalk[_0x171492(0xd6)]('Using\x20multi-file\x20auth\x20state.')),await useMultiFileAuthState(SESSION_DIR);}catch(_0x12844b){console[_0x171492(0x8a)](chalk['red'](_0x171492(0x9d),_0x12844b));throw _0x12844b;}}async function restartBot(_0x57b927,_0x57a2d2){const _0x21bf9e=a0_0x2ecd22;if(isRestarting)return;isRestarting=!![],console[_0x21bf9e(0xfd)](chalk[_0x21bf9e(0xa6)](_0x21bf9e(0xa1)));try{console['log'](chalk[_0x21bf9e(0xa9)]('Restarting\x20bot\x20in\x205\x20seconds...')),setTimeout(async()=>{const _0x7038d1=_0x21bf9e;try{isRestarting=![],await kordAi(_0x57b927,_0x57a2d2),console[_0x7038d1(0xfd)](chalk[_0x7038d1(0xa9)](_0x7038d1(0x89)));}catch(_0x2fc5a3){console[_0x7038d1(0x8a)](chalk['red']('Error\x20during\x20restart:',_0x2fc5a3)),setTimeout(()=>restartBot(_0x57b927,_0x57a2d2),0x7530);}},0x1388);}catch(_0x11f2b9){console[_0x21bf9e(0x8a)](chalk[_0x21bf9e(0xa4)](_0x21bf9e(0xdd),_0x11f2b9)),isRestarting=![],setTimeout(()=>restartBot(_0x57b927,_0x57a2d2),0x7530);}}async function kordAi(_0xcc83bf,_0x293a8f){const _0x1183a0=a0_0x2ecd22;try{await loadCommands(path['join'](__dirname,'..',_0x1183a0(0xc9))),_0x293a8f[_0x1183a0(0xee)](_0x1183a0(0x8f),(_0x4c8f00,_0x4df128)=>{const _0x160eb6=_0x1183a0;_0x4df128[_0x160eb6(0xb6)]({'messageTotal':messagesSent});});const _0x5315b8=new SQLiteMessageStore(LOGGER);await _0x5315b8['initialize'](),setInterval(()=>_0x5315b8[_0x1183a0(0x88)](0x1),0x18*0x3c*0x3c*0x3e8);const {state:_0x4b35b3,saveCreds:_0x1f761d}=await getAuthState(),{version:_0x107d26,isLatest:_0x40f2a4}=await fetchLatestBaileysVersion();console[_0x1183a0(0xfd)](chalk[_0x1183a0(0xd6)](_0x1183a0(0xec)+_0x107d26[_0x1183a0(0xd0)]('.')+_0x1183a0(0xe9)+_0x40f2a4));const _0x3c2807=makeWASocket({'version':_0x107d26,'auth':{'creds':_0x4b35b3['creds'],'keys':makeCacheableSignalKeyStore(_0x4b35b3[_0x1183a0(0xb9)],LOGGER)},'printQRInTerminal':![],'logger':LOGGER,'msgRetryCounterCache':MSG_RETRY_CACHE,'generateHighQualityLinkPreview':!![],'defaultQueryTimeoutMs':undefined,'getMessage':async _0x2f290e=>{const _0x329e09=_0x1183a0,_0x4fae76=await _0x5315b8['loadMessage'](_0x2f290e[_0x329e09(0xdf)],_0x2f290e['id']);return _0x4fae76?.[_0x329e09(0xc0)]||undefined;}});await _0x5315b8[_0x1183a0(0x94)](_0x3c2807['ev']),await againstEventManager[_0x1183a0(0xd7)](_0x3c2807),initializeKordEvents(_0x3c2807),_0x3c2807['ev']['on'](_0x1183a0(0xad),_0x1f761d),_0x3c2807['ev']['on'](_0x1183a0(0xfa),async _0x9d283b=>{const _0x2d5ba5=_0x1183a0,_0x253141=_0x9d283b[_0x2d5ba5(0xd9)][0x0];_0x253141&&(messagesSent++,await kordMsg(_0x3c2807,_0x253141));}),_0x3c2807['ev']['on'](_0x1183a0(0xd5),async _0xa47bc2=>{const _0xab0aa5=_0x1183a0;console['log'](chalk[_0xab0aa5(0xa6)](_0xab0aa5(0xce)));try{const _0x4e0a27=await setupAntidelete(_0x3c2807,_0x5315b8);for(const _0x101616 of _0xa47bc2){(_0x101616[_0xab0aa5(0xef)]['message']===null||_0x101616[_0xab0aa5(0xef)][_0xab0aa5(0xa7)]===0x2)&&await _0x4e0a27['execute'](_0x3c2807,_0x101616,{'store':_0x5315b8});}}catch(_0x51c1e6){console['error'](chalk[_0xab0aa5(0xa4)]('Error\x20in\x20antidelete\x20execution:',_0x51c1e6));}}),_0x3c2807['ev']['on'](_0x1183a0(0xf6),async _0x5f53bb=>{const _0x412fb8=_0x1183a0,{connection:_0x46bae2,lastDisconnect:_0x15128c}=_0x5f53bb;if(_0x46bae2===_0x412fb8(0x105)){console['log'](chalk[_0x412fb8(0xa9)](_0x412fb8(0x93))),chatbotModule[_0x412fb8(0xd7)](_0x3c2807),antilinkCommand[_0x412fb8(0xd7)](_0x3c2807),await startHeartbeat();if(!_0x3c2807[_0x412fb8(0xe2)][_0x412fb8(0xf4)][_0x412fb8(0xd4)]){const _0x180e31=global[_0x412fb8(0xc5)]['OWNER_NUMBERS']['split'](',')[0x0][_0x412fb8(0xa0)](),_0x3f9481=await _0x3c2807[_0x412fb8(0xbc)](_0x180e31);console[_0x412fb8(0xfd)](chalk['blue']('Pairing\x20Code\x20for\x20'+_0x180e31+':\x20'+_0x3f9481));}}if(_0x46bae2===_0x412fb8(0xdb)){await stopHeartbeat();const _0x577375=new Boom(_0x15128c?.[_0x412fb8(0x8a)])?.[_0x412fb8(0x100)]?.[_0x412fb8(0xda)]!==DisconnectReason[_0x412fb8(0xe4)];console[_0x412fb8(0xfd)](chalk[_0x412fb8(0xa6)](_0x412fb8(0xba),_0x15128c?.['error'],_0x412fb8(0xe8),_0x577375)),_0x577375&&setTimeout(()=>restartBot(_0xcc83bf,_0x293a8f),0x1388);}}),process['on'](_0x1183a0(0xe0),async()=>{const _0x639413=_0x1183a0;console[_0x639413(0xfd)](chalk[_0x639413(0xa6)](_0x639413(0xc1))),await restartBot(_0xcc83bf,_0x293a8f);}),process['on'](_0x1183a0(0x8c),async _0x4420bb=>{const _0x12965d=_0x1183a0;console['error'](chalk[_0x12965d(0xa4)](_0x12965d(0x9b),_0x4420bb)),await restartBot(_0xcc83bf,_0x293a8f);}),process['on'](_0x1183a0(0xc7),async(_0x1dfffe,_0x43ea61)=>{const _0x472119=_0x1183a0;console[_0x472119(0x8a)](chalk[_0x472119(0xa4)](_0x472119(0x99),_0x43ea61,_0x472119(0xc4),_0x1dfffe)),await restartBot(_0xcc83bf,_0x293a8f);});}catch(_0x3c07dc){console[_0x1183a0(0x8a)](chalk[_0x1183a0(0xa4)](_0x1183a0(0xfb),_0x3c07dc)),setTimeout(()=>restartBot(_0xcc83bf,_0x293a8f),0x1388);}}module[a0_0x2ecd22(0x9e)]={'kordAi':kordAi};